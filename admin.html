<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="UTF-8"&gt;</p>
<p class="p1">&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</p>
<p class="p1">&lt;title&gt;AARMA Admin Panel | Orders&lt;/title&gt;</p>
<p class="p1">&lt;link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&amp;family=Playfair+Display:wght@400;700&amp;display=swap" rel="stylesheet"&gt;</p>
<p class="p1">&lt;script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"&gt;&lt;/script&gt;</p>
<p class="p1">&lt;script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"&gt;&lt;/script&gt;</p>
<p class="p1">&lt;style&gt;</p>
<p class="p1">body{font-family:'Poppins',sans-serif;background:#1a0a0a;color:#f3e5d5;padding:20px;}</p>
<p class="p1">h1{color:#ffb700;text-align:center;margin-bottom:20px;}</p>
<p class="p1">table{width:100%;border-collapse:collapse;margin-bottom:30px;}</p>
<p class="p1">th,td{border:1px solid #ffb700;padding:10px;text-align:left;}</p>
<p class="p1">th{background:#330000;color:#ffb700;}</p>
<p class="p1">tr:nth-child(even){background:rgba(255,183,0,0.1);}</p>
<p class="p1">button{padding:5px 10px;border:none;border-radius:5px;cursor:pointer;font-weight:bold;}</p>
<p class="p1">.status-btn{background:#ffb700;color:black;margin-right:5px;}</p>
<p class="p1">.delete-btn{background:#dc3545;color:white;}</p>
<p class="p1">a.map-link{color:#28a745;text-decoration:none;}</p>
<p class="p1">a.map-link:hover{text-decoration:underline;}</p>
<p class="p1">&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;h1&gt;AARMA Restaurant | Admin Panel&lt;/h1&gt;</p>
<p class="p1">&lt;table&gt;</p>
<p class="p1">&lt;thead&gt;</p>
<p class="p1">&lt;tr&gt;</p>
<p class="p1">&lt;th&gt;Order ID&lt;/th&gt;</p>
<p class="p1">&lt;th&gt;Name&lt;/th&gt;</p>
<p class="p1">&lt;th&gt;Phone&lt;/th&gt;</p>
<p class="p1">&lt;th&gt;Address&lt;/th&gt;</p>
<p class="p1">&lt;th&gt;Cart&lt;/th&gt;</p>
<p class="p1">&lt;th&gt;Total (₹)&lt;/th&gt;</p>
<p class="p1">&lt;th&gt;Status&lt;/th&gt;</p>
<p class="p1">&lt;th&gt;Location&lt;/th&gt;</p>
<p class="p1">&lt;th&gt;Actions&lt;/th&gt;</p>
<p class="p1">&lt;/tr&gt;</p>
<p class="p1">&lt;/thead&gt;</p>
<p class="p1">&lt;tbody id="ordersTable"&gt;</p>
<p class="p1">&lt;tr&gt;&lt;td colspan="9" style="text-align:center;"&gt;Loading orders...&lt;/td&gt;&lt;/tr&gt;</p>
<p class="p1">&lt;/tbody&gt;</p>
<p class="p1">&lt;/table&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">// Firebase Config (replace with your project keys)</p>
<p class="p1">const firebaseConfig = {</p>
<p class="p1"><span class="Apple-converted-space">  </span>apiKey: "YOUR_FIREBASE_APIKEY",</p>
<p class="p1"><span class="Apple-converted-space">  </span>authDomain: "YOUR_FIREBASE_AUTHDOMAIN",</p>
<p class="p1"><span class="Apple-converted-space">  </span>databaseURL: "YOUR_FIREBASE_DBURL",</p>
<p class="p1"><span class="Apple-converted-space">  </span>projectId: "YOUR_FIREBASE_PROJECTID",</p>
<p class="p1"><span class="Apple-converted-space">  </span>storageBucket: "YOUR_FIREBASE_BUCKET",</p>
<p class="p1"><span class="Apple-converted-space">  </span>messagingSenderId: "YOUR_FIREBASE_SENDERID",</p>
<p class="p1"><span class="Apple-converted-space">  </span>appId: "YOUR_FIREBASE_APPID"</p>
<p class="p1">};</p>
<p class="p1">firebase.initializeApp(firebaseConfig);</p>
<p class="p1">const db = firebase.database();</p>
<p class="p2"><br></p>
<p class="p1">// Fetch Orders</p>
<p class="p1">function loadOrders(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>const table=document.getElementById('ordersTable');</p>
<p class="p1"><span class="Apple-converted-space">  </span>db.ref('orders').on('value',snapshot=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">    </span>table.innerHTML='';</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(!snapshot.exists()){ table.innerHTML='&lt;tr&gt;&lt;td colspan="9" style="text-align:center;"&gt;No orders yet&lt;/td&gt;&lt;/tr&gt;'; return; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>const data=snapshot.val();</p>
<p class="p1"><span class="Apple-converted-space">    </span>Object.keys(data).forEach(key=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">      </span>const o=data[key];</p>
<p class="p1"><span class="Apple-converted-space">      </span>const cartDetails=o.cart.map(c=&gt;`${c.name} x ${c.qty}`).join('&lt;br&gt;');</p>
<p class="p1"><span class="Apple-converted-space">      </span>const tr=document.createElement('tr');</p>
<p class="p1"><span class="Apple-converted-space">      </span>tr.innerHTML=`</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;${o.id}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;${o.name}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;${o.phone}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;${o.address}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;${cartDetails}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;${o.total}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;${o.status}&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;&lt;a class="map-link" target="_blank" href="https://www.google.com/maps?q=${o.lat},${o.lng}"&gt;View&lt;/a&gt;&lt;/td&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;td&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="status-btn" onclick="updateStatus('${o.id}')"&gt;Next Status&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="delete-btn" onclick="deleteOrder('${o.id}')"&gt;Delete&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/td&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>table.appendChild(tr);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// Status update: Pending → Preparing → Delivered → Cancelled → Pending</p>
<p class="p1">function updateStatus(orderId){</p>
<p class="p1"><span class="Apple-converted-space">  </span>const ref=db.ref('orders/'+orderId);</p>
<p class="p1"><span class="Apple-converted-space">  </span>ref.once('value',snapshot=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(!snapshot.exists()) return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const curr=snapshot.val().status;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let next='Pending';</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(curr==='Pending') next='Preparing';</p>
<p class="p1"><span class="Apple-converted-space">    </span>else if(curr==='Preparing') next='Delivered';</p>
<p class="p1"><span class="Apple-converted-space">    </span>else if(curr==='Delivered') next='Cancelled';</p>
<p class="p1"><span class="Apple-converted-space">    </span>else if(curr==='Cancelled') next='Pending';</p>
<p class="p1"><span class="Apple-converted-space">    </span>ref.update({status:next});</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">// Delete order</p>
<p class="p1">function deleteOrder(orderId){ if(confirm('Are you sure you want to delete this order?')) db.ref('orders/'+orderId).remove(); }</p>
<p class="p2"><br></p>
<p class="p1">loadOrders();</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
